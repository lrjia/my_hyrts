理解核心算法及工具相比类似工具的突出创新点及原理。、
理解功能模块及数据流动/交互
理解工具输入输出要求及理由，以及输入数据构造及输出结果分析

# 背景
回归测试已被广泛用于确保软件发展不会破坏现有功能。然而，简单地重新运行整个回归测试是非常耗时的。所以回归测试选择（RTS）被提出，通过只选择和运行受代码变更影响的测试以减少回归测试所需时间。

一个典型的RTS技术需要两个方面的信息。(1) 旧的程序版本上的测试依赖信息（即在每个测试执行过程中执行到程序部分），(2) 新版本程序相对旧版本改变的程序部分。然后，RTS技术会选择与任何改变程序部分相关的测试作为要执行测试。

RTS技术可分为动态和静态技术；根据测试依赖关系和程序变化中的程序元素的粒度，RTS技术可分为基本块级、方法级、文件级，甚至模块级技术。

由于静态RTS使用静态分析倾向于过度估计测试的依赖性，因此可能会选择超过必要的测试。动态RTS技术中的文件级的RTS由于其较低的开销，与方法级RTS技术相比，端到端时间（即包括RTS开销和实际测试时间）更少，是目前最好的RTS技术。尽管文件级的RTS已经被证明是经济有效的，但它可能比更细粒度的RTS选择更多的测试执行。

文章中对于各种文件变化和方法级别变化的缩写
![[Pasted image 20211127113612.png]]


# 实现
HyRTS的实现同一般的RTS技术差不多
- 首先要收集测试依赖的代码，HyRTS通过动态的方法收集，即在旧版本的代码上运行所有的测试，记录测试执行到的文件、方法或基本块；第二部需要计算新代码和旧代码。
- 第二步要计算修改后代码的变更，根据需要计算文件级别、方法级别或者代码块级别的变更。
- 第三步根据前两步骤的信息筛选出受影响需要执行的测试。
- 最后执行筛选得到的测试

## 依赖收集
- 以测试类为单位收集依赖
- 使用Java Agent和ASM动态插桩代码，并修改junit代码来捕获JUnit3和JUnit4测试的测试类开始/结束事件，以便记录每个测试的依赖信息。
- 运行时记录动态查找变化(LC)，就是因为继承关系引发的变化，即以X为运行时对象的Y.m()的调用可能会调用不同的方法
- 为了提高效率，只在运行时收集Tdm(方法依赖)，Tdf(文件依赖)可以通过从TDm离线生成，例如，访问方法A.m()可以转化为访问文件A
- 根据是否分两步执行一般测试和依赖收集，分为离线模式和在线模式。

## 变更计算
- 只有在文件有变化是才记录方法级别的变化
- 计算并记录文件或方法的校验和
- 对于没有变化的文件，所有的方法级校验和都是直接从先前的版本中复制

## 测试筛选
- 测试筛选的内容时这个工作研究的重点，在接下来的研究部分详细介绍。

## 测试执行
- 向maven surefire plugin传递参数，运行需要执行的测试


# 研究
实际上，不同粒度的动态RTS技术有其自身的优势--在较粗粒度上工作的技术可能有较低的开销，而在较细粒度上工作的RTS技术在选择测试时可能更精确。这个研究的工作就是结合不同粒度的RTS的优势，设计一种混合的RTS方法，期望它比现有的任何RTS技术都效益更大。

## HyRTS
- 结合了方法级和文件级的分析
- 只对只有更细粒度的方法级变化的类文件进行方法级分析，而对所有其他情况进行文件级分析，如文件级添加/删除，或类文件头改变。
- 更具成本效益的RTS。

## HyRTS变体研究
- 通过将某一类方法级转化为文件级的变化来研究这种方法级变化的在RTS过程中的影响，即如果遇到某一类方法级变化就将其当作一个文件变化

## HyRTS_B
- HyRTS变体研究表明对与CIM(非初始化方法变化)，CSM(静态非初始化方法变化)可能需要更细粒度的分析
- HyRTS_B对CIM，CSM使用基本快级别的分析
- 为了支持基本块级别分析，测试依赖收集时也需要收集基本块级别的信息

## HyRTS_F
- HyRTS变体研究也表明将AIM(对象方法增加)，DIM(对象方法删除)转为文件级变化对HyRTS效率影响不大，即不会对测试选择产生较大影响
- HyRYS_F将AIM，DIM转为CF(文件级变化)分析
- 尽管HyRTS_F会选择更多的测试，但是不需要AIM，DIM导致的LC(动态查找变化)，因此降低收集信息的开销

# 结论
- 在基本块层面上进一步整合更精细的分析并不具有成本效益，而将实例方法的增加和删除转化为文件层面的变化可以产生一个具有成本效益的HyRTS变体
- 在线和离线模式下都一直优于现有的FRTS。